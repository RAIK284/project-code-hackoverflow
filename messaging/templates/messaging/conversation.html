{% extends 'main.html' %} {% block content %} {% load emoji_tags %}
<head>
	<script
		src="https://cdn.tiny.cloud/1/tk29zolrf951wd9vs5320xksjrmqle7n0chxq2h7ak419npc/tinymce/5/tinymce.min.js"
		referrerpolicy="origin"
	></script>
	<script>
		tinymce.init({
			selector: "#body",
			plugins: "emoticons",
			toolbar: "emoticons",
			toolbar_location: "bottom",
			menubar: false,
			height: 200,
			width: 600,
		});
	</script>
</head>

<div class="conversation">
	<h3>{{ convo.name }}</h3>

	<div>
		Members:
		<br />
		{% for name in members %} {{ name }}
		<br />
		{% endfor %}
	</div>

	<hr />

	{% for message in messages %}
	<div class="p-3 mb-2 bg-primary text-white">
		{% if message.sender.first_name == first_name %}
		<p class="text-right">You: {{ message.body|emoji_replace|emoji_replace}}</p>
		{% else %}
		<p>{{ message.sender.first_name }}: {{ message.body|emoji_replace}}</p>
		{% endif %}
	</div>
	{% endfor %}

	<div>
		{% if request.user.is_authenticated %}
		<div class="comment-form">
			<form method="POST" action="" id="msgform">
				{% csrf_token %}
				<textarea id="body" name="body" placeholder="New Message..."></textarea>
				{% comment %}
				<input
					type="text"
					name="body"
					placeholder="Write your message here..."
				/>
				{% endcomment %}
				<input type="submit" value="Send" />
			</form>
		</div>
		{% endif %}
	</div>
</div>

{% endblock %}
