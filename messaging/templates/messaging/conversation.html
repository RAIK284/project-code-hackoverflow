{% extends 'main.html' %} {% block content %} {% load emoji_tags %}
<head>
	<script
		src="https://cdn.tiny.cloud/1/tk29zolrf951wd9vs5320xksjrmqle7n0chxq2h7ak419npc/tinymce/5/tinymce.min.js"
		referrerpolicy="origin"
	></script>
	<script>
		tinymce.init({
			selector: "#body",
			plugins: "emoticons",
			toolbar: "emoticons",
			toolbar_location: "bottom",
			menubar: false,
			height: 200,
			width: 600,
		});
	</script>
</head>

<div class="container-fluid" style="font-size:25px;">
	<div class="mt-3 mb-3">
		<h1>Members:</h1>
		<h2 class="ml-3">
			{% for name in members %}
			- {{ name }}
			<br />
			{% endfor %}
		</h2>
	</div>

	{% for message in messages %}
	<div class="p-3 mb-2 rounded rounded-3"
		{% if message.sender.first_name == first_name %}
		style="background-color:#2a9d8f; color:white;"
		{% else %}
		style="background-color:#eaeaea; color:black;"
		{% endif %}
	>
		{% if message.sender.first_name == first_name %}
			<p class="text-right">You: {{ message.body|emoji_replace|emoji_replace }}</p>
			<p class="text-right">Points: {{ message.points }}</p>
		{% else %}
			<p>
				<a href="{% url 'profile' message.sender.id %}" style="font-style:italic;">
					@{{ message.sender.username }}
				</a>
				: {{ message.body|emoji_replace }}
			</p>
			<p>Points: {{ message.points }}</p>
		{% endif %}
	</div>
	{% endfor %}

	<div>
		{% if request.user.is_authenticated %}
		<div class="comment-form">
			<form method="POST" action="" id="msgform">
				{% csrf_token %}
				<textarea id="body" name="body" placeholder="New Message..."></textarea>
				{% comment %}
				<input
					type="text"
					name="body"
					placeholder="Write your message here..."
				/>
				{% endcomment %}
				<input class="btn btn-success my-3" type="submit" value="Send" />
			</form>
		</div>
		{% endif %}
	</div>
</div>

{% endblock %}
