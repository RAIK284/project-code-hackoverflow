{% extends 'main.html' %} {% block content %}

<style>
	.main-profile-info {
		text-align: center;
	}
</style>

<body>
	<center>
		<div class="profile-page">
			<div class="main-profile-info">
				<!-- Only show a profile image if one is set -->
				{% if profile.image and profile.image.url %}
				<img
					class="rounded-circle z-depth-2"
					alt="{{ user.get_full_name }}'s profile picture"
					src="{{ profile.image.url }}"
					style="max-height: 200px"
				/>
				{% endif %}

				<h1>@{{ user.username }}</h1>
				<h3>{{ user.get_full_name }}</h3>
				<h4>{{ user.email }}</h4>

				<div class="bio">{{ profile.bio }}</div>

				<!-- Make sure a user can only edit the profile that's theirs -->
				{% if current_user.username == user.username %}
				<a
					class="btn btn-primary"
					href="{% url 'updateProfile' user.id %}"
					role="button"
				>
					Update Profile
				</a>
				{% endif %}
			</div>
			
			<div class="points-info">
				<!-- Only show points if toggled on -->
				{% if profile.displayPoints %}
					<h4>Points: {{ profile.points }}</h4>
				{% endif %}

				<!-- Only show current spendable points if the user is on their own page -->
				{% if current_user.username == user.username %}
					<h4>Wallet: {{profile.wallet}}</h4>
				{% endif %}
			</div>

			<div class="purchases-info">
				<!-- Only show purchases if toggled on -->
				{% if profile.displayPurchases or current_user.username == user.username%}
				<div>
					<!-- Make sure the purchases don't error out -->
					{% if purchases.count > 0 %} {% for purchase in purchases %}
					<div>
						<h5>{{ purchase.product.name }}</h5>
						<img
							class="z-depth-2"
							alt="Image of purchase: {{ purchase.product.name }}"
							src="{{ purchase.product.image.url }}"
							style="max-height: 300px"
						/>
					</div>
					{% endfor %} {% else %}
					<h5>Go buy something!</h5>
					{% endif %}
				</div>
				{% endif %}
			</div>
		</div>
	</center>
</body>

{% endblock %}
